const e=e=>{let t=document.querySelector(".movies-list");t.innerHTML="";let o=e.map(({id:e,title:t,genre:o,director:n,year:i})=>`<li id="${e}" class="movies-item"><h3 class="movies-title">${t}</h3><p class="movies-genre">${o}</p><p class="movies-director">${n}</p><p class="movies-year">${i}</p><div class="movie-managment"><button type="button" class="button movie-button edit-button">Edit</button><button type="button" class="button movie-button delete-button">Delete</button></div></li>`).join("");t.innerHTML=o},t=()=>{let t=[];for(let e of o)t.some(t=>Number(t.id)===Number(e.id))||t.push(e);o.length=0,o.push(...t),e(o)};let o=[];const n=()=>{let e={title:document.querySelector(".title").value,genre:document.querySelector(".genre").value,director:document.querySelector(".director").value,year:document.querySelector(".year").value},n={method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json; charset=UTF-8"}};fetch(`http://localhost:3000/movies/${e.id}`).then(e=>{if(!e.ok)return fetch("http://localhost:3000/movies",n).then(e=>e.json()).then(e=>{o.push(e),t()})})},i=()=>fetch("http://localhost:3000/movies/1",{method:"PUT",body:JSON.stringify({id:7,title:"Back to the Future",genre:"Fantasy",director:"Robert Zemeckis",year:1985}),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(e=>e.json()).then(n=>{let i=o.findIndex(e=>e.id===n.id);-1!==i?o[i]={...o[i],...n}:o.push(n),t(),e(o)}),s=()=>{fetch("http://localhost:3000/movies/5",{method:"PATCH",body:JSON.stringify({title:"The Knight and Day",director:"James Mangold"}),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(e=>e.json()).then(n=>{console.log(n),t(),e(o)})},l=e=>fetch(`http://localhost:3000/movies/${e}`,{method:"DELETE"}).then(e=>e).catch(e=>console.log(e)),c=()=>{document.querySelectorAll(".delete-button").forEach(t=>{t.addEventListener("click",()=>{l(t.parentElement.parentElement.id).then(()=>e(o))})})};fetch("http://localhost:3000/movies").then(e=>e.json()).then(e=>{o.length=0,o.push(...e),t()}).then(()=>{i(),s(),l(),c()}),document.querySelector(".add-movie").addEventListener("click",()=>{n()}),(()=>{let e=document.querySelector(".get-movies"),t=document.querySelector(".hide-movies"),o=document.querySelector(".movies-list");e.addEventListener("click",()=>{o.classList.remove("is-hidden")}),t.addEventListener("click",()=>{o.classList.add("is-hidden")})})(),(()=>{let e=document.querySelector(".hide-movies"),t=document.querySelector(".movies-list");e.addEventListener("click",()=>{t.classList.add("is-hidden")})})();
//# sourceMappingURL=index.9d4f4afd.js.map
