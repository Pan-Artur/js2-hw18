const e=e=>{let t=document.querySelector(".movies-list");t.innerHTML="";let o=e.map(({id:e,title:t,genre:o,director:n,year:i})=>`<li id="${e}" class="movies-item"><h3 class="movies-title">${t}</h3><p class="movies-genre">${o}</p><p class="movies-director">${n}</p><p class="movies-year">${i}</p><div class="movie-managment"><button type="button" class="button movie-button edit-button">Edit</button><button type="button" class="button movie-button delete-button">Delete</button></div></li>`).join("");t.innerHTML=o},t=()=>{let t=[];for(let e of o)t.some(t=>Number(t.id)===Number(e.id))||t.push(e);o.length=0,o.push(...t),e(o)};let o=[];const n=()=>fetch("http://localhost:3000/movies",{method:"POST",body:JSON.stringify({title:document.querySelector(".title").value,genre:document.querySelector(".genre").value,director:document.querySelector(".director").value,year:document.querySelector(".year").value}),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(e=>e.json()).then(e=>{o.push(e),t()}),i=e=>fetch(`http://localhost:3000/movies/${e}`,{method:"DELETE"}).then(e=>e).catch(e=>console.log(e)),s=()=>{document.removeEventListener("click",r),document.addEventListener("click",r)},r=e=>{if(e.target.classList.contains("delete-button")){let t=e.target.closest(".movies-item");i(t.id).then(()=>{t.remove()})}},l=(e,t)=>fetch(`http://localhost:3000/movies/${t}`,{method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(e=>e.json()).then(e=>e).catch(e=>console.log(e)),c=()=>{document.addEventListener("click",d)},d=e=>{if(e.target.classList.contains("edit-button")){let t=document.querySelector(".backdrop-edit"),o=document.querySelector(".form-edit"),n=document.querySelector(".modal-edit-close"),i=e.target.closest(".movies-item"),s=i.dataset.id;t.classList.remove("is-hidden"),o.elements.name.value=i.querySelector(".movies-title").textContent,o.elements.genre.value=i.querySelector(".movies-genre").textContent,o.elements.director.value=i.querySelector(".movies-director").textContent,o.elements.year.value=i.querySelector(".movies-year").textContent;let r=e=>{e.preventDefault(),t.classList.add("is-hidden");let n={title:o.elements.name.value,genre:o.elements.genre.value,director:o.elements.director.value,year:o.elements.year.value};l(s,n).then(()=>{i.querySelector(".movies-title").textContent=n.title,i.querySelector(".movies-genre").textContent=n.genre,i.querySelector(".movies-director").textContent=n.director,i.querySelector(".movies-year").textContent=n.year}),o.removeEventListener("submit",r)};o.addEventListener("submit",r),n.addEventListener("click",()=>{t.classList.add("is-hidden"),o.removeEventListener("submit",r)})}};fetch("http://localhost:3000/movies").then(e=>e.json()).then(n=>{o.length=0,o.push(...n),e(n),c(),s(),t()}),document.querySelector(".add-movie").addEventListener("click",()=>{n()}),(()=>{let e=document.querySelector(".get-movies"),t=document.querySelector(".hide-movies"),o=document.querySelector(".movies-list");e.addEventListener("click",()=>{o.classList.remove("is-hidden")}),t.addEventListener("click",()=>{o.classList.add("is-hidden")})})(),(()=>{let e=document.querySelector(".hide-movies"),t=document.querySelector(".movies-list");e.addEventListener("click",()=>{t.classList.add("is-hidden")})})();
//# sourceMappingURL=index.759cbaca.js.map
