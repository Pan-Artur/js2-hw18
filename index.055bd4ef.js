const e=e=>{let t=document.querySelector(".movies-list");t.innerHTML="";let o=e.map(({id:e,title:t,genre:o,director:r,year:s})=>`<li id="${e}" class="movies-item"><h3 class="movies-title">${t}</h3><p class="movies-genre">${o}</p><p class="movies-director">${r}</p><p class="movies-year">${s}</p><div class="movie-managment"><button type="button" class="button movie-button edit-button">Edit</button><button type="button" class="button movie-button edit-everything-button">Edit all</button><button type="button" class="button movie-button delete-button">Delete</button></div></li>`).join("");t.innerHTML=o},t=()=>{let t=[];for(let e of o)t.some(t=>Number(t.id)===Number(e.id))||t.push(e);o.length=0,o.push(...t),e(o)};let o=[];const r=async()=>{try{let e={title:document.querySelector(".title").value,genre:document.querySelector(".genre").value,director:document.querySelector(".director").value,year:document.querySelector(".year").value},r={method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json; charset=UTF-8"}},s=await fetch("http://localhost:3000/movies",r),n=await s.json();return o.push(n),t(),n}catch(e){console.error(e)}},s=async e=>{try{let t=await fetch(`http://localhost:3000/movies/${e}`,{method:"DELETE"});return await t.json()}catch(e){console.error(e)}},n=()=>{document.removeEventListener("click",i),document.addEventListener("click",i)},i=async e=>{if(e.target.classList.contains("delete-button")){let t=e.target.closest(".movies-item");try{await s(t.id),t.remove()}catch(e){console.error(e)}}},c=async(e,t)=>{try{let o={method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json; charset=UTF-8"}},r=await fetch(`http://localhost:3000/movies/${t}`,o);return await r.json()}catch(e){console.error(e)}},l=()=>{document.addEventListener("click",a)},a=e=>{if(e.target.classList.contains("edit-everything-button")){let t=document.querySelector(".backdrop-edit"),o=document.querySelector(".form-edit"),r=document.querySelector(".modal-edit-close"),s=e.target.closest(".movies-item"),n=s.dataset.id;t.classList.remove("is-hidden"),document.body.classList.add("no-scroll"),o.elements.name.value=s.querySelector(".movies-title").textContent,o.elements.genre.value=s.querySelector(".movies-genre").textContent,o.elements.director.value=s.querySelector(".movies-director").textContent,o.elements.year.value=s.querySelector(".movies-year").textContent;let i=async e=>{e.preventDefault(),t.classList.add("is-hidden"),document.body.classList.remove("no-scroll");let r={title:o.elements.name.value,genre:o.elements.genre.value,director:o.elements.director.value,year:o.elements.year.value};try{await c(n,r),s.querySelector(".movies-title").textContent=r.title,s.querySelector(".movies-genre").textContent=r.genre,s.querySelector(".movies-director").textContent=r.director,s.querySelector(".movies-year").textContent=r.year}catch(e){console.error(e)}t.classList.add("is-hidden"),document.body.classList.remove("no-scroll"),o.removeEventListener("submit",i)};o.addEventListener("submit",i),r.addEventListener("click",()=>{t.classList.add("is-hidden"),document.body.classList.remove("no-scroll"),o.removeEventListener("submit",i)})}},d=async(e,t)=>{try{let o={method:"PATCH",body:JSON.stringify(e),headers:{"Content-Type":"application/json; charset=UTF-8"}},r=await fetch(`http://localhost:3000/movies/${t}`,o);return await r.json()}catch(e){console.error(e)}},m=()=>{document.addEventListener("click",u)},u=e=>{if(e.target.classList.contains("edit-button")){let t=document.querySelector(".backdrop-edit"),o=document.querySelector(".form-edit"),r=document.querySelector(".modal-edit-close"),s=e.target.closest(".movies-item"),n=s.dataset.id;t.classList.remove("is-hidden"),document.body.classList.add("no-scroll"),o.elements.name.value=s.querySelector(".movies-title").textContent,o.elements.genre.value=s.querySelector(".movies-genre").textContent,o.elements.director.value=s.querySelector(".movies-director").textContent,o.elements.year.value=s.querySelector(".movies-year").textContent;let i=async e=>{e.preventDefault(),t.classList.add("is-hidden"),document.body.classList.remove("no-scroll");let r={title:o.elements.name.value,genre:o.elements.genre.value,director:o.elements.director.value,year:o.elements.year.value};try{await d(n,r),s.querySelector(".movies-title").textContent=r.title,s.querySelector(".movies-genre").textContent=r.genre,s.querySelector(".movies-director").textContent=r.director,s.querySelector(".movies-year").textContent=r.year}catch(e){console.error(e)}t.classList.add("is-hidden"),document.body.classList.remove("no-scroll"),o.removeEventListener("submit",i)};o.addEventListener("submit",i),r.addEventListener("click",()=>{t.classList.add("is-hidden"),document.body.classList.remove("no-scroll"),o.removeEventListener("submit",i)})}};(async()=>{try{let r=await fetch("http://localhost:3000/movies"),s=await r.json();o.push(...s),e(s),m(),l(),n(),t()}catch(e){console.error(e)}})(),(async()=>{document.querySelector(".add-movie").addEventListener("click",async()=>{try{await r()}catch(e){console.error(e)}})})(),(()=>{let e=document.querySelector(".get-movies"),t=document.querySelector(".hide-movies"),o=document.querySelector(".movies-list");e.addEventListener("click",()=>{o.classList.remove("is-hidden")}),t.addEventListener("click",()=>{o.classList.add("is-hidden")})})(),(()=>{let e=document.querySelector(".hide-movies"),t=document.querySelector(".movies-list");e.addEventListener("click",()=>{t.classList.add("is-hidden")})})();
//# sourceMappingURL=index.055bd4ef.js.map
